# LLM Council Configuration for llm-council project
# Generated: 2025-12-24 for v0.15.0
#
# This configuration enables the Model Intelligence Layer (ADR-026)
# with appropriate settings for development and self-improvement use cases.

council:
  # =========================================================================
  # LAYER 1: Tier Selection (ADR-022)
  # =========================================================================
  tiers:
    # Default to 'high' for quality council deliberations
    default: high

    pools:
      quick:
        models:
          - openai/gpt-4o-mini
          - anthropic/claude-3-5-haiku-20241022
          - google/gemini-2.0-flash-001
        timeout_seconds: 30

      balanced:
        models:
          - openai/gpt-4o
          - anthropic/claude-3-5-sonnet-20241022
          - google/gemini-2.5-pro-preview-06-05
          - x-ai/grok-2-1212
        timeout_seconds: 90

      high:
        models:
          - openai/gpt-4o
          - anthropic/claude-opus-4-5-20250514
          - google/gemini-2.5-pro-preview-06-05
          - x-ai/grok-3-beta
        timeout_seconds: 180

      reasoning:
        models:
          - openai/o1
          - anthropic/claude-opus-4-5-20250514
          - google/gemini-2.5-pro-preview-06-05
          - deepseek/deepseek-r1
        timeout_seconds: 600

    escalation:
      enabled: true
      notify_user: true
      max_escalations: 2

  # =========================================================================
  # LAYER 4: Gateway Routing (ADR-023)
  # =========================================================================
  gateways:
    default: openrouter

    providers:
      openrouter:
        enabled: true
        api_key: ${OPENROUTER_API_KEY}

    fallback:
      enabled: true
      chain: [openrouter]

  # =========================================================================
  # Model Intelligence Layer (ADR-026) - ENABLED
  # =========================================================================
  model_intelligence:
    enabled: true

    sources:
      openrouter_api: true
      internal_performance: true

    refresh:
      registry_ttl: 3600           # 1 hour
      availability_ttl: 300        # 5 minutes

    selection:
      min_providers: 2
      default_count: 4

      anti_herding:
        enabled: true
        traffic_threshold: 0.3     # 30%
        max_penalty: 0.35          # 35%

    parameters:
      auto_reasoning: true
      reasoning_effort_by_tier:
        quick: minimal
        balanced: low
        high: medium
        reasoning: high

    # Internal Performance Tracking (Phase 3)
    performance_tracker:
      enabled: true
      store_path: "${HOME}/.llm-council/performance_metrics.jsonl"
      decay_days: 30
      min_samples_preliminary: 10
      min_samples_moderate: 30
      min_samples_high: 100

  # =========================================================================
  # Bias Auditing (ADR-015, ADR-018) - ENABLED for self-improvement
  # =========================================================================
  bias_audit:
    enabled: true
    length_correlation_threshold: 0.7
    position_variance_threshold: 0.5

  bias_persistence:
    enabled: true
    store_path: "${HOME}/.llm-council/bias_data.jsonl"
    consent_level: LOCAL_ONLY

  # =========================================================================
  # Scoring Configuration (ADR-016)
  # =========================================================================
  scoring:
    rubric_enabled: false          # Enable for detailed scoring
    safety_gate_enabled: false     # Enable if safety filtering needed

  # =========================================================================
  # Council Behavior
  # =========================================================================
  council:
    mode: consensus                # 'consensus' or 'debate'
    exclude_self_votes: true       # Prevent self-preference bias
    style_normalization: false     # Optional anonymization enhancement

  # =========================================================================
  # Credentials (referenced from environment)
  # =========================================================================
  credentials:
    openrouter: ${OPENROUTER_API_KEY}
